{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { getProject, getProjects, createProject, updateProject, getShots, createShot, updateShot } from \"../../lib/supabase/supabase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar ProjectContext = createContext();\nexport function ProjectProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    projects = _useState2[0],\n    setProjects = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentProject = _useState4[0],\n    setCurrentProject = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    shots = _useState6[0],\n    setShots = _useState6[1];\n  var _useState7 = useState(true),\n    _useState8 = _slicedToArray(_useState7, 2),\n    loading = _useState8[0],\n    setLoading = _useState8[1];\n  var _useState9 = useState(null),\n    _useState0 = _slicedToArray(_useState9, 2),\n    error = _useState0[0],\n    setError = _useState0[1];\n  var loadProjects = useCallback(_asyncToGenerator(function* () {\n    setLoading(true);\n    try {\n      var _yield$getProjects = yield getProjects(),\n        data = _yield$getProjects.data,\n        _error = _yield$getProjects.error;\n      setProjects(data || []);\n      setError(_error);\n    } catch (err) {\n      console.warn('Failed to load projects:', err);\n      setProjects([]);\n      setError({\n        message: 'Failed to load projects'\n      });\n    } finally {\n      setLoading(false);\n    }\n  }), []);\n  var loadProject = useCallback(function () {\n    var _ref3 = _asyncToGenerator(function* (projectId) {\n      setLoading(true);\n      try {\n        var _yield$getProject = yield getProject(projectId),\n          data = _yield$getProject.data,\n          _error2 = _yield$getProject.error;\n        setCurrentProject(data || null);\n        setError(_error2);\n        if (data) {\n          var _yield$getShots = yield getShots(projectId),\n            shotsData = _yield$getShots.data;\n          setShots(shotsData || []);\n        } else {\n          setShots([]);\n        }\n      } catch (err) {\n        console.warn('Failed to load project:', err);\n        setCurrentProject(null);\n        setShots([]);\n        setError({\n          message: 'Failed to load project'\n        });\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), []);\n  var addProject = function () {\n    var _ref4 = _asyncToGenerator(function* (projectData) {\n      var _yield$createProject = yield createProject(projectData),\n        data = _yield$createProject.data,\n        error = _yield$createProject.error;\n      if (!error) loadProjects();\n      setError(error);\n      return {\n        data: data,\n        error: error\n      };\n    });\n    return function addProject(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var updateCurrentProject = function () {\n    var _ref5 = _asyncToGenerator(function* (projectId, updates) {\n      var _yield$updateProject = yield updateProject(projectId, updates),\n        data = _yield$updateProject.data,\n        error = _yield$updateProject.error;\n      if (!error) loadProject(projectId);\n      setError(error);\n      return {\n        data: data,\n        error: error\n      };\n    });\n    return function updateCurrentProject(_x3, _x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  return _jsx(ProjectContext.Provider, {\n    value: {\n      projects: projects,\n      currentProject: currentProject,\n      shots: shots,\n      loading: loading,\n      error: error,\n      loadProjects: loadProjects,\n      loadProject: loadProject,\n      addProject: addProject,\n      updateCurrentProject: updateCurrentProject\n    },\n    children: children\n  });\n}\nexport function useProject() {\n  return useContext(ProjectContext);\n}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","getProject","getProjects","createProject","updateProject","getShots","createShot","updateShot","jsx","_jsx","ProjectContext","ProjectProvider","_ref","children","_useState","_useState2","_slicedToArray","projects","setProjects","_useState3","_useState4","currentProject","setCurrentProject","_useState5","_useState6","shots","setShots","_useState7","_useState8","loading","setLoading","_useState9","_useState0","error","setError","loadProjects","_asyncToGenerator","_yield$getProjects","data","err","console","warn","message","loadProject","_ref3","projectId","_yield$getProject","_yield$getShots","shotsData","_x","apply","arguments","addProject","_ref4","projectData","_yield$createProject","_x2","updateCurrentProject","_ref5","updates","_yield$updateProject","_x3","_x4","Provider","value","useProject"],"sources":["/workspace/MakeAScene/src/contexts/ProjectContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { getProject, getProjects, createProject, updateProject, getShots, createShot, updateShot } from '../../lib/supabase/supabase';\n\nconst ProjectContext = createContext();\n\nexport function ProjectProvider({ children }) {\n  const [projects, setProjects] = useState([]);\n  const [currentProject, setCurrentProject] = useState(null);\n  const [shots, setShots] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Load all projects\n  const loadProjects = useCallback(async () => {\n    setLoading(true);\n    try {\n      const { data, error } = await getProjects();\n      setProjects(data || []);\n      setError(error);\n    } catch (err) {\n      console.warn('Failed to load projects:', err);\n      setProjects([]);\n      setError({ message: 'Failed to load projects' });\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Load a single project and its shots\n  const loadProject = useCallback(async (projectId) => {\n    setLoading(true);\n    try {\n      const { data, error } = await getProject(projectId);\n      setCurrentProject(data || null);\n      setError(error);\n      if (data) {\n        const { data: shotsData } = await getShots(projectId);\n        setShots(shotsData || []);\n      } else {\n        setShots([]);\n      }\n    } catch (err) {\n      console.warn('Failed to load project:', err);\n      setCurrentProject(null);\n      setShots([]);\n      setError({ message: 'Failed to load project' });\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Add, update, and refresh helpers\n  const addProject = async (projectData) => {\n    const { data, error } = await createProject(projectData);\n    if (!error) loadProjects();\n    setError(error);\n    return { data, error };\n  };\n\n  const updateCurrentProject = async (projectId, updates) => {\n    const { data, error } = await updateProject(projectId, updates);\n    if (!error) loadProject(projectId);\n    setError(error);\n    return { data, error };\n  };\n\n  // Real-time subscriptions can be added here as needed\n\n  return (\n    <ProjectContext.Provider value={{\n      projects,\n      currentProject,\n      shots,\n      loading,\n      error,\n      loadProjects,\n      loadProject,\n      addProject,\n      updateCurrentProject\n    }}>\n      {children}\n    </ProjectContext.Provider>\n  );\n}\n\nexport function useProject() {\n  return useContext(ProjectContext);\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}