{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { Camera } from 'expo-camera';\nimport { recordingService } from \"../lib/recording/recordingService\";\nimport { deviceService } from \"../lib/multiDevice/deviceService\";\nimport { jsxs as _jsxs, jsx as _jsx } from \"react/jsx-runtime\";\nvar _Dimensions$get = Dimensions.get('window'),\n  screenWidth = _Dimensions$get.width,\n  screenHeight = _Dimensions$get.height;\nvar FilmingScreen = function FilmingScreen(_ref) {\n  var _storyboard$shots, _storyboard$shots2, _currentShot$shotType, _storyboard$shots3, _storyboard$shots4;\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _route$params = route.params,\n    projectId = _route$params.projectId,\n    storyboard = _route$params.storyboard,\n    multiDeviceEnabled = _route$params.multiDeviceEnabled,\n    deviceRole = _route$params.deviceRole;\n  var cameraRef = useRef(null);\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    cameraPermission = _useState2[0],\n    setCameraPermission = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentShotIndex = _useState4[0],\n    setCurrentShotIndex = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isRecording = _useState6[0],\n    setIsRecording = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    recordingCountdown = _useState8[0],\n    setRecordingCountdown = _useState8[1];\n  var _useState9 = useState({}),\n    _useState0 = _slicedToArray(_useState9, 2),\n    recordedTakes = _useState0[0],\n    setRecordedTakes = _useState0[1];\n  var _useState1 = useState(Camera.Constants.Type.back),\n    _useState10 = _slicedToArray(_useState1, 2),\n    cameraType = _useState10[0],\n    setCameraType = _useState10[1];\n  var _useState11 = useState(Camera.Constants.FlashMode.off),\n    _useState12 = _slicedToArray(_useState11, 2),\n    flashMode = _useState12[0],\n    setFlashMode = _useState12[1];\n  var _useState13 = useState([]),\n    _useState14 = _slicedToArray(_useState13, 2),\n    connectedDevices = _useState14[0],\n    setConnectedDevices = _useState14[1];\n  var _useState15 = useState('ready'),\n    _useState16 = _slicedToArray(_useState15, 2),\n    syncStatus = _useState16[0],\n    setSyncStatus = _useState16[1];\n  var _useState17 = useState(null),\n    _useState18 = _slicedToArray(_useState17, 2),\n    deviceStatus = _useState18[0],\n    setDeviceStatus = _useState18[1];\n  var _useState19 = useState(false),\n    _useState20 = _slicedToArray(_useState19, 2),\n    showStoryboard = _useState20[0],\n    setShowStoryboard = _useState20[1];\n  var _useState21 = useState(true),\n    _useState22 = _slicedToArray(_useState21, 2),\n    showInstructions = _useState22[0],\n    setShowInstructions = _useState22[1];\n  var _useState23 = useState(false),\n    _useState24 = _slicedToArray(_useState23, 2),\n    loading = _useState24[0],\n    setLoading = _useState24[1];\n  var currentShot = storyboard == null ? void 0 : (_storyboard$shots = storyboard.shots) == null ? void 0 : _storyboard$shots[currentShotIndex];\n  useEffect(function () {\n    initializeServices();\n    return function () {\n      recordingService.cleanup();\n      if (multiDeviceEnabled) {\n        deviceService.disconnect();\n      }\n    };\n  }, []);\n  useEffect(function () {\n    if (cameraRef.current) {\n      recordingService.setCameraRef(cameraRef.current);\n    }\n  }, [cameraRef.current]);\n  var initializeServices = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var recordingInit = yield recordingService.initialize();\n        if (!recordingInit.success) {\n          throw new Error('Failed to initialize recording: ' + recordingInit.error);\n        }\n        setCameraPermission(recordingInit.permissions.camera);\n        if (multiDeviceEnabled) {\n          yield deviceService.initialize();\n          deviceService.startStatusMonitoring();\n          updateDeviceStatus();\n        }\n      } catch (error) {\n        Alert.alert('Initialization Error', error.message);\n      }\n    });\n    return function initializeServices() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var updateDeviceStatus = function updateDeviceStatus() {\n    if (multiDeviceEnabled) {\n      var status = deviceService.getDevicesStatus();\n      setDeviceStatus(status);\n      setConnectedDevices(status.devices);\n    }\n  };\n  var startRecording = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (!currentShot) {\n        Alert.alert('Error', 'No shot selected');\n        return;\n      }\n      try {\n        setLoading(true);\n        if (multiDeviceEnabled && deviceRole === 'primary') {\n          yield startCoordinatedRecording();\n        } else if (multiDeviceEnabled && deviceRole !== 'primary') {\n          Alert.alert('Waiting', 'Waiting for primary device to start recording...');\n          return;\n        } else {\n          yield startSingleDeviceRecording();\n        }\n      } catch (error) {\n        Alert.alert('Recording Error', error.message);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function startRecording() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var startSingleDeviceRecording = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      var shotData = {\n        shotNumber: currentShot.shotNumber,\n        shotType: currentShot.shotType,\n        maxDuration: currentShot.duration,\n        description: currentShot.description\n      };\n      var result = yield recordingService.startRecording(shotData);\n      if (result.success) {\n        setIsRecording(true);\n        setShowInstructions(false);\n      } else {\n        throw new Error(result.error);\n      }\n    });\n    return function startSingleDeviceRecording() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var startCoordinatedRecording = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      yield deviceService.synchronizeTime();\n      var countdown = 3;\n      setRecordingCountdown(countdown);\n      for (var i = countdown; i > 0; i--) {\n        setRecordingCountdown(i);\n        yield new Promise(function (resolve) {\n          return setTimeout(resolve, 1000);\n        });\n      }\n      setRecordingCountdown(0);\n      var shotData = {\n        shotNumber: currentShot.shotNumber,\n        shotType: currentShot.shotType,\n        maxDuration: currentShot.duration,\n        description: currentShot.description,\n        deviceRole: deviceRole\n      };\n      var result = yield recordingService.startCoordinatedRecording(shotData, 0);\n      if (result.success) {\n        setIsRecording(true);\n        setShowInstructions(false);\n        setSyncStatus('recording');\n      } else {\n        throw new Error(result.error);\n      }\n    });\n    return function startCoordinatedRecording() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var stopRecording = function () {\n    var _ref6 = _asyncToGenerator(function* () {\n      try {\n        var result = yield recordingService.stopRecording();\n        if (result.success) {\n          setIsRecording(false);\n          var takeKey = `shot_${currentShot.shotNumber}`;\n          var existingTakes = recordedTakes[takeKey] || [];\n          setRecordedTakes(function (prev) {\n            return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, takeKey, [].concat(_toConsumableArray(existingTakes), [result.recording])));\n          });\n          var qualityAssessment = yield recordingService.assessRecordingQuality(result.recording.uri);\n          showQualityFeedback(qualityAssessment);\n          setSyncStatus('ready');\n        }\n      } catch (error) {\n        Alert.alert('Stop Recording Error', error.message);\n        setIsRecording(false);\n      }\n    });\n    return function stopRecording() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var showQualityFeedback = function showQualityFeedback(assessment) {\n    var overallScore = assessment.overallScore,\n      recommendations = assessment.recommendations;\n    var qualityText = overallScore >= 90 ? 'Excellent!' : overallScore >= 75 ? 'Good' : overallScore >= 60 ? 'Acceptable' : 'Needs Improvement';\n    Alert.alert(`Take Quality: ${qualityText} (${overallScore}/100)`, recommendations.join('\\n'), [{\n      text: 'Retake',\n      onPress: function onPress() {\n        return retakeCurrentShot();\n      }\n    }, {\n      text: 'Continue',\n      onPress: function onPress() {\n        return moveToNextShot();\n      }\n    }]);\n  };\n  var retakeCurrentShot = function retakeCurrentShot() {\n    setShowInstructions(true);\n  };\n  var moveToNextShot = function moveToNextShot() {\n    if (currentShotIndex < storyboard.shots.length - 1) {\n      setCurrentShotIndex(currentShotIndex + 1);\n      setShowInstructions(true);\n    } else {\n      Alert.alert('Scene Complete!', 'Congratulations! You have completed filming all shots.', [{\n        text: 'Review',\n        onPress: function onPress() {\n          return navigation.navigate('ReviewScreen', {\n            projectId: projectId,\n            recordedTakes: recordedTakes\n          });\n        }\n      }, {\n        text: 'Finish',\n        onPress: function onPress() {\n          return navigation.navigate('Dashboard');\n        }\n      }]);\n    }\n  };\n  var switchCamera = function () {\n    var _ref7 = _asyncToGenerator(function* () {\n      var newType = cameraType === Camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back;\n      setCameraType(newType);\n    });\n    return function switchCamera() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  var toggleFlash = function toggleFlash() {\n    var flashModes = [Camera.Constants.FlashMode.off, Camera.Constants.FlashMode.on, Camera.Constants.FlashMode.auto];\n    var currentIndex = flashModes.indexOf(flashMode);\n    setFlashMode(flashModes[(currentIndex + 1) % flashModes.length]);\n  };\n  var renderStoryboardOverlay = function renderStoryboardOverlay() {\n    if (!showStoryboard || !currentShot) return null;\n    return _jsx(Modal, {\n      visible: showStoryboard,\n      transparent: true,\n      animationType: \"slide\",\n      children: _jsx(View, {\n        style: styles.storyboardModal,\n        children: _jsxs(View, {\n          style: styles.storyboardContainer,\n          children: [_jsxs(Text, {\n            style: styles.storyboardTitle,\n            children: [\"Shot \", currentShot.shotNumber]\n          }), currentShot.sketchImageUrl && _jsx(Image, {\n            source: {\n              uri: currentShot.sketchImageUrl\n            },\n            style: styles.storyboardImage,\n            resizeMode: \"contain\"\n          }), _jsx(Text, {\n            style: styles.storyboardDescription,\n            children: currentShot.description\n          }), _jsxs(View, {\n            style: styles.storyboardDetails,\n            children: [_jsxs(Text, {\n              style: styles.detailText,\n              children: [\"\\uD83D\\uDCF7 \", currentShot.cameraPosition]\n            }), _jsxs(Text, {\n              style: styles.detailText,\n              children: [\"\\uD83D\\uDC65 \", currentShot.actorPositions]\n            }), _jsxs(Text, {\n              style: styles.detailText,\n              children: [\"\\u23F1\\uFE0F \", currentShot.duration, \"s\"]\n            })]\n          }), _jsx(TouchableOpacity, {\n            style: styles.closeStoryboardButton,\n            onPress: function onPress() {\n              return setShowStoryboard(false);\n            },\n            children: _jsx(Text, {\n              style: styles.closeButtonText,\n              children: \"Got it!\"\n            })\n          })]\n        })\n      })\n    });\n  };\n  var renderInstructionsOverlay = function renderInstructionsOverlay() {\n    if (!showInstructions || !currentShot) return null;\n    var instructions = recordingService.generateAIInstructions(currentShot);\n    return _jsx(View, {\n      style: styles.instructionsOverlay,\n      children: _jsxs(View, {\n        style: styles.instructionsContainer,\n        children: [_jsxs(Text, {\n          style: styles.instructionsTitle,\n          children: [\"\\uD83C\\uDFAC Shot \", currentShot.shotNumber, \" Instructions\"]\n        }), _jsxs(View, {\n          style: styles.instructionSection,\n          children: [_jsx(Text, {\n            style: styles.instructionLabel,\n            children: \"\\uD83D\\uDCF7 Camera Setup:\"\n          }), _jsx(Text, {\n            style: styles.instructionText,\n            children: instructions.cameraSetup\n          })]\n        }), _jsxs(View, {\n          style: styles.instructionSection,\n          children: [_jsx(Text, {\n            style: styles.instructionLabel,\n            children: \"\\uD83D\\uDCCD Positioning:\"\n          }), _jsx(Text, {\n            style: styles.instructionText,\n            children: instructions.positioning.camera\n          }), _jsx(Text, {\n            style: styles.instructionText,\n            children: instructions.positioning.actors\n          })]\n        }), _jsxs(View, {\n          style: styles.instructionSection,\n          children: [_jsx(Text, {\n            style: styles.instructionLabel,\n            children: \"\\uD83D\\uDCA1 Pro Tips:\"\n          }), instructions.tips.map(function (tip, index) {\n            return _jsxs(Text, {\n              style: styles.tipText,\n              children: [\"\\u2022 \", tip]\n            }, index);\n          })]\n        }), _jsx(TouchableOpacity, {\n          style: styles.startRecordingButton,\n          onPress: function onPress() {\n            return setShowInstructions(false);\n          },\n          children: _jsx(Text, {\n            style: styles.startRecordingButtonText,\n            children: \"Ready to Record\"\n          })\n        })]\n      })\n    });\n  };\n  var renderDeviceStatus = function renderDeviceStatus() {\n    if (!multiDeviceEnabled || !deviceStatus) return null;\n    return _jsxs(View, {\n      style: styles.deviceStatusContainer,\n      children: [_jsxs(Text, {\n        style: styles.deviceStatusTitle,\n        children: [\"\\uD83D\\uDCF1 \", deviceStatus.totalDevices, \" Device\", deviceStatus.totalDevices > 1 ? 's' : '', \" Connected\"]\n      }), _jsxs(Text, {\n        style: styles.deviceRole,\n        children: [\"Role: \", deviceRole]\n      }), _jsxs(Text, {\n        style: styles.syncStatus,\n        children: [\"Status: \", syncStatus]\n      })]\n    });\n  };\n  if (cameraPermission === null) {\n    return _jsxs(View, {\n      style: styles.permissionContainer,\n      children: [_jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#FFD700\"\n      }), _jsx(Text, {\n        style: styles.permissionText,\n        children: \"Requesting camera permission...\"\n      })]\n    });\n  }\n  if (cameraPermission !== 'granted') {\n    return _jsxs(View, {\n      style: styles.permissionContainer,\n      children: [_jsx(Text, {\n        style: styles.permissionText,\n        children: \"Camera permission is required to record scenes.\"\n      }), _jsx(TouchableOpacity, {\n        style: styles.permissionButton,\n        onPress: initializeServices,\n        children: _jsx(Text, {\n          style: styles.permissionButtonText,\n          children: \"Grant Permission\"\n        })\n      })]\n    });\n  }\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.cameraContainer,\n      children: _jsxs(Camera, {\n        ref: cameraRef,\n        style: styles.camera,\n        type: cameraType,\n        flashMode: flashMode,\n        ratio: \"16:9\",\n        children: [recordingCountdown > 0 && _jsx(View, {\n          style: styles.countdownOverlay,\n          children: _jsx(Text, {\n            style: styles.countdownText,\n            children: recordingCountdown\n          })\n        }), isRecording && _jsxs(View, {\n          style: styles.recordingIndicator,\n          children: [_jsx(View, {\n            style: styles.recordingDot\n          }), _jsx(Text, {\n            style: styles.recordingText,\n            children: \"REC\"\n          })]\n        }), renderDeviceStatus(), _jsxs(View, {\n          style: styles.shotInfoContainer,\n          children: [_jsxs(Text, {\n            style: styles.shotInfoText,\n            children: [\"Shot \", currentShot == null ? void 0 : currentShot.shotNumber, \" of \", storyboard == null ? void 0 : (_storyboard$shots2 = storyboard.shots) == null ? void 0 : _storyboard$shots2.length]\n          }), _jsx(Text, {\n            style: styles.shotTypeText,\n            children: currentShot == null ? void 0 : (_currentShot$shotType = currentShot.shotType) == null ? void 0 : _currentShot$shotType.replace('_', ' ')\n          })]\n        })]\n      })\n    }), _jsxs(View, {\n      style: styles.controlsContainer,\n      children: [_jsxs(View, {\n        style: styles.topControls,\n        children: [_jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return navigation.goBack();\n          },\n          children: _jsx(Text, {\n            style: styles.backButton,\n            children: \"\\u2190 Back\"\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return setShowStoryboard(true);\n          },\n          children: _jsx(Text, {\n            style: styles.storyboardButton,\n            children: \"\\uD83D\\uDCCB Storyboard\"\n          })\n        })]\n      }), _jsxs(View, {\n        style: styles.cameraControls,\n        children: [_jsx(TouchableOpacity, {\n          style: styles.controlButton,\n          onPress: switchCamera,\n          children: _jsx(Text, {\n            style: styles.controlButtonText,\n            children: \"\\uD83D\\uDD04\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.controlButton,\n          onPress: toggleFlash,\n          children: _jsx(Text, {\n            style: styles.controlButtonText,\n            children: flashMode === Camera.Constants.FlashMode.off ? '‚ö°' : flashMode === Camera.Constants.FlashMode.on ? 'üí°' : 'üîÜ'\n          })\n        })]\n      }), _jsx(View, {\n        style: styles.recordingControls,\n        children: !isRecording ? _jsx(TouchableOpacity, {\n          style: [styles.recordButton, loading && styles.disabledButton],\n          onPress: startRecording,\n          disabled: loading,\n          children: loading ? _jsx(ActivityIndicator, {\n            color: \"#FFFFFF\"\n          }) : _jsx(View, {\n            style: styles.recordButtonInner\n          })\n        }) : _jsx(TouchableOpacity, {\n          style: styles.stopButton,\n          onPress: stopRecording,\n          children: _jsx(View, {\n            style: styles.stopButtonInner\n          })\n        })\n      }), _jsxs(View, {\n        style: styles.shotNavigation,\n        children: [_jsx(TouchableOpacity, {\n          style: [styles.navButton, currentShotIndex === 0 && styles.disabledNavButton],\n          onPress: function onPress() {\n            return setCurrentShotIndex(Math.max(0, currentShotIndex - 1));\n          },\n          disabled: currentShotIndex === 0,\n          children: _jsx(Text, {\n            style: styles.navButtonText,\n            children: \"\\u2190 Prev Shot\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: [styles.navButton, currentShotIndex === (storyboard == null ? void 0 : (_storyboard$shots3 = storyboard.shots) == null ? void 0 : _storyboard$shots3.length) - 1 && styles.disabledNavButton],\n          onPress: function onPress() {\n            return setCurrentShotIndex(Math.min(storyboard.shots.length - 1, currentShotIndex + 1));\n          },\n          disabled: currentShotIndex === (storyboard == null ? void 0 : (_storyboard$shots4 = storyboard.shots) == null ? void 0 : _storyboard$shots4.length) - 1,\n          children: _jsx(Text, {\n            style: styles.navButtonText,\n            children: \"Next Shot \\u2192\"\n          })\n        })]\n      })]\n    }), renderStoryboardOverlay(), renderInstructionsOverlay()]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000000'\n  },\n  permissionContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#1a1a1a',\n    padding: 20\n  },\n  permissionText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    textAlign: 'center',\n    marginVertical: 20\n  },\n  permissionButton: {\n    backgroundColor: '#FFD700',\n    paddingHorizontal: 30,\n    paddingVertical: 15,\n    borderRadius: 25\n  },\n  permissionButtonText: {\n    color: '#1a1a1a',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  cameraContainer: {\n    flex: 1\n  },\n  camera: {\n    flex: 1\n  },\n  countdownOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.7)'\n  },\n  countdownText: {\n    color: '#FFD700',\n    fontSize: 100,\n    fontWeight: 'bold'\n  },\n  recordingIndicator: {\n    position: 'absolute',\n    top: 50,\n    left: 20,\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  recordingDot: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: '#ff0000',\n    marginRight: 8\n  },\n  recordingText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  deviceStatusContainer: {\n    position: 'absolute',\n    top: 50,\n    right: 20,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    padding: 10,\n    borderRadius: 8\n  },\n  deviceStatusTitle: {\n    color: '#FFD700',\n    fontSize: 12,\n    fontWeight: 'bold'\n  },\n  deviceRole: {\n    color: '#FFFFFF',\n    fontSize: 10\n  },\n  syncStatus: {\n    color: '#FFFFFF',\n    fontSize: 10\n  },\n  shotInfoContainer: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    padding: 10,\n    borderRadius: 8\n  },\n  shotInfoText: {\n    color: '#FFD700',\n    fontSize: 14,\n    fontWeight: 'bold'\n  },\n  shotTypeText: {\n    color: '#FFFFFF',\n    fontSize: 12,\n    textTransform: 'capitalize'\n  },\n  controlsContainer: {\n    backgroundColor: '#1a1a1a',\n    paddingHorizontal: 20,\n    paddingVertical: 10\n  },\n  topControls: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20\n  },\n  backButton: {\n    color: '#FFD700',\n    fontSize: 16\n  },\n  storyboardButton: {\n    color: '#FFD700',\n    fontSize: 16\n  },\n  cameraControls: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 20\n  },\n  controlButton: {\n    backgroundColor: '#333333',\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  controlButtonText: {\n    fontSize: 24\n  },\n  recordingControls: {\n    alignItems: 'center',\n    marginBottom: 20\n  },\n  recordButton: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: '#ff0000',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 4,\n    borderColor: '#FFFFFF'\n  },\n  recordButtonInner: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n    backgroundColor: '#ff0000'\n  },\n  stopButton: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: '#666666',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 4,\n    borderColor: '#FFFFFF'\n  },\n  stopButtonInner: {\n    width: 30,\n    height: 30,\n    backgroundColor: '#FFFFFF'\n  },\n  disabledButton: {\n    opacity: 0.5\n  },\n  shotNavigation: {\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  },\n  navButton: {\n    backgroundColor: '#333333',\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 20\n  },\n  disabledNavButton: {\n    opacity: 0.3\n  },\n  navButtonText: {\n    color: '#FFFFFF',\n    fontSize: 14\n  },\n  storyboardModal: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  storyboardContainer: {\n    backgroundColor: '#2a2a2a',\n    padding: 20,\n    borderRadius: 15,\n    width: '100%',\n    maxWidth: 400\n  },\n  storyboardTitle: {\n    color: '#FFD700',\n    fontSize: 20,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 15\n  },\n  storyboardImage: {\n    width: '100%',\n    height: 200,\n    borderRadius: 10,\n    marginBottom: 15\n  },\n  storyboardDescription: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    marginBottom: 15,\n    lineHeight: 22\n  },\n  storyboardDetails: {\n    marginBottom: 20\n  },\n  detailText: {\n    color: '#CCC',\n    fontSize: 14,\n    marginBottom: 5\n  },\n  closeStoryboardButton: {\n    backgroundColor: '#FFD700',\n    padding: 15,\n    borderRadius: 10,\n    alignItems: 'center'\n  },\n  closeButtonText: {\n    color: '#1a1a1a',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  instructionsOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  instructionsContainer: {\n    backgroundColor: '#2a2a2a',\n    padding: 20,\n    borderRadius: 15,\n    width: '100%',\n    maxWidth: 400\n  },\n  instructionsTitle: {\n    color: '#FFD700',\n    fontSize: 18,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 20\n  },\n  instructionSection: {\n    marginBottom: 15\n  },\n  instructionLabel: {\n    color: '#FFD700',\n    fontSize: 14,\n    fontWeight: 'bold',\n    marginBottom: 5\n  },\n  instructionText: {\n    color: '#FFFFFF',\n    fontSize: 13,\n    lineHeight: 18,\n    marginBottom: 3\n  },\n  tipText: {\n    color: '#CCC',\n    fontSize: 12,\n    lineHeight: 16,\n    marginBottom: 2\n  },\n  startRecordingButton: {\n    backgroundColor: '#FFD700',\n    padding: 15,\n    borderRadius: 10,\n    alignItems: 'center',\n    marginTop: 10\n  },\n  startRecordingButtonText: {\n    color: '#1a1a1a',\n    fontSize: 16,\n    fontWeight: 'bold'\n  }\n});\nexport default FilmingScreen;","map":{"version":3,"names":["React","useState","useEffect","useRef","View","Text","StyleSheet","TouchableOpacity","SafeAreaView","Image","Alert","Dimensions","ActivityIndicator","Modal","Camera","recordingService","deviceService","jsxs","_jsxs","jsx","_jsx","_Dimensions$get","get","screenWidth","width","screenHeight","height","FilmingScreen","_ref","_storyboard$shots","_storyboard$shots2","_currentShot$shotType","_storyboard$shots3","_storyboard$shots4","route","navigation","_route$params","params","projectId","storyboard","multiDeviceEnabled","deviceRole","cameraRef","_useState","_useState2","_slicedToArray","cameraPermission","setCameraPermission","_useState3","_useState4","currentShotIndex","setCurrentShotIndex","_useState5","_useState6","isRecording","setIsRecording","_useState7","_useState8","recordingCountdown","setRecordingCountdown","_useState9","_useState0","recordedTakes","setRecordedTakes","_useState1","Constants","Type","back","_useState10","cameraType","setCameraType","_useState11","FlashMode","off","_useState12","flashMode","setFlashMode","_useState13","_useState14","connectedDevices","setConnectedDevices","_useState15","_useState16","syncStatus","setSyncStatus","_useState17","_useState18","deviceStatus","setDeviceStatus","_useState19","_useState20","showStoryboard","setShowStoryboard","_useState21","_useState22","showInstructions","setShowInstructions","_useState23","_useState24","loading","setLoading","currentShot","shots","initializeServices","cleanup","disconnect","current","setCameraRef","_ref2","_asyncToGenerator","recordingInit","initialize","success","Error","error","permissions","camera","startStatusMonitoring","updateDeviceStatus","alert","message","apply","arguments","status","getDevicesStatus","devices","startRecording","_ref3","startCoordinatedRecording","startSingleDeviceRecording","_ref4","shotData","shotNumber","shotType","maxDuration","duration","description","result","_ref5","synchronizeTime","countdown","i","Promise","resolve","setTimeout","stopRecording","_ref6","takeKey","existingTakes","prev","_objectSpread","_defineProperty","concat","_toConsumableArray","recording","qualityAssessment","assessRecordingQuality","uri","showQualityFeedback","assessment","overallScore","recommendations","qualityText","join","text","onPress","retakeCurrentShot","moveToNextShot","length","navigate","switchCamera","_ref7","newType","front","toggleFlash","flashModes","on","auto","currentIndex","indexOf","renderStoryboardOverlay","visible","transparent","animationType","children","style","styles","storyboardModal","storyboardContainer","storyboardTitle","sketchImageUrl","source","storyboardImage","resizeMode","storyboardDescription","storyboardDetails","detailText","cameraPosition","actorPositions","closeStoryboardButton","closeButtonText","renderInstructionsOverlay","instructions","generateAIInstructions","instructionsOverlay","instructionsContainer","instructionsTitle","instructionSection","instructionLabel","instructionText","cameraSetup","positioning","actors","tips","map","tip","index","tipText","startRecordingButton","startRecordingButtonText","renderDeviceStatus","deviceStatusContainer","deviceStatusTitle","totalDevices","permissionContainer","size","color","permissionText","permissionButton","permissionButtonText","container","cameraContainer","ref","type","ratio","countdownOverlay","countdownText","recordingIndicator","recordingDot","recordingText","shotInfoContainer","shotInfoText","shotTypeText","replace","controlsContainer","topControls","goBack","backButton","storyboardButton","cameraControls","controlButton","controlButtonText","recordingControls","recordButton","disabledButton","disabled","recordButtonInner","stopButton","stopButtonInner","shotNavigation","navButton","disabledNavButton","Math","max","navButtonText","min","create","flex","backgroundColor","justifyContent","alignItems","padding","fontSize","textAlign","marginVertical","paddingHorizontal","paddingVertical","borderRadius","fontWeight","position","top","left","right","bottom","flexDirection","marginRight","textTransform","marginBottom","borderWidth","borderColor","opacity","maxWidth","lineHeight","marginTop"],"sources":["/workspace/MakeAScene/screens/FilmingScreen.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  SafeAreaView,\n  Image,\n  Alert,\n  Dimensions,\n  ActivityIndicator,\n  Modal\n} from 'react-native';\nimport { Camera } from 'expo-camera';\nimport { recordingService } from '../lib/recording/recordingService';\nimport { deviceService } from '../lib/multiDevice/deviceService';\n\nconst { width: screenWidth, height: screenHeight } = Dimensions.get('window');\n\nconst FilmingScreen = ({ route, navigation }) => {\n  const { projectId, storyboard, multiDeviceEnabled, deviceRole } = route.params;\n  \n  // Camera and recording state\n  const cameraRef = useRef(null);\n  const [cameraPermission, setCameraPermission] = useState(null);\n  const [currentShotIndex, setCurrentShotIndex] = useState(0);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingCountdown, setRecordingCountdown] = useState(0);\n  const [recordedTakes, setRecordedTakes] = useState({});\n  const [cameraType, setCameraType] = useState(Camera.Constants.Type.back);\n  const [flashMode, setFlashMode] = useState(Camera.Constants.FlashMode.off);\n\n  // Multi-device state\n  const [connectedDevices, setConnectedDevices] = useState([]);\n  const [syncStatus, setSyncStatus] = useState('ready');\n  const [deviceStatus, setDeviceStatus] = useState(null);\n\n  // UI state\n  const [showStoryboard, setShowStoryboard] = useState(false);\n  const [showInstructions, setShowInstructions] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  const currentShot = storyboard?.shots?.[currentShotIndex];\n\n  useEffect(() => {\n    initializeServices();\n    \n    return () => {\n      // Cleanup\n      recordingService.cleanup();\n      if (multiDeviceEnabled) {\n        deviceService.disconnect();\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (cameraRef.current) {\n      recordingService.setCameraRef(cameraRef.current);\n    }\n  }, [cameraRef.current]);\n\n  const initializeServices = async () => {\n    try {\n      // Initialize recording service\n      const recordingInit = await recordingService.initialize();\n      if (!recordingInit.success) {\n        throw new Error('Failed to initialize recording: ' + recordingInit.error);\n      }\n      setCameraPermission(recordingInit.permissions.camera);\n\n      // Initialize device service for multi-device\n      if (multiDeviceEnabled) {\n        await deviceService.initialize();\n        deviceService.startStatusMonitoring();\n        updateDeviceStatus();\n      }\n    } catch (error) {\n      Alert.alert('Initialization Error', error.message);\n    }\n  };\n\n  const updateDeviceStatus = () => {\n    if (multiDeviceEnabled) {\n      const status = deviceService.getDevicesStatus();\n      setDeviceStatus(status);\n      setConnectedDevices(status.devices);\n    }\n  };\n\n  // Recording Functions\n  const startRecording = async () => {\n    if (!currentShot) {\n      Alert.alert('Error', 'No shot selected');\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      if (multiDeviceEnabled && deviceRole === 'primary') {\n        // Coordinated multi-device recording\n        await startCoordinatedRecording();\n      } else if (multiDeviceEnabled && deviceRole !== 'primary') {\n        // Secondary device waits for signal\n        Alert.alert('Waiting', 'Waiting for primary device to start recording...');\n        return;\n      } else {\n        // Single device recording\n        await startSingleDeviceRecording();\n      }\n    } catch (error) {\n      Alert.alert('Recording Error', error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const startSingleDeviceRecording = async () => {\n    const shotData = {\n      shotNumber: currentShot.shotNumber,\n      shotType: currentShot.shotType,\n      maxDuration: currentShot.duration,\n      description: currentShot.description\n    };\n\n    const result = await recordingService.startRecording(shotData);\n    if (result.success) {\n      setIsRecording(true);\n      setShowInstructions(false);\n    } else {\n      throw new Error(result.error);\n    }\n  };\n\n  const startCoordinatedRecording = async () => {\n    // Synchronize time across devices\n    await deviceService.synchronizeTime();\n    \n    // Start countdown\n    const countdown = 3;\n    setRecordingCountdown(countdown);\n    \n    for (let i = countdown; i > 0; i--) {\n      setRecordingCountdown(i);\n      await new Promise(resolve => setTimeout(resolve, 1000));\n    }\n    \n    setRecordingCountdown(0);\n\n    const shotData = {\n      shotNumber: currentShot.shotNumber,\n      shotType: currentShot.shotType,\n      maxDuration: currentShot.duration,\n      description: currentShot.description,\n      deviceRole: deviceRole\n    };\n\n    const result = await recordingService.startCoordinatedRecording(shotData, 0);\n    if (result.success) {\n      setIsRecording(true);\n      setShowInstructions(false);\n      setSyncStatus('recording');\n    } else {\n      throw new Error(result.error);\n    }\n  };\n\n  const stopRecording = async () => {\n    try {\n      const result = await recordingService.stopRecording();\n      if (result.success) {\n        setIsRecording(false);\n        \n        // Add to recorded takes\n        const takeKey = `shot_${currentShot.shotNumber}`;\n        const existingTakes = recordedTakes[takeKey] || [];\n        setRecordedTakes(prev => ({\n          ...prev,\n          [takeKey]: [...existingTakes, result.recording]\n        }));\n\n        // Assess quality\n        const qualityAssessment = await recordingService.assessRecordingQuality(result.recording.uri);\n        \n        // Show quality feedback\n        showQualityFeedback(qualityAssessment);\n        \n        setSyncStatus('ready');\n      }\n    } catch (error) {\n      Alert.alert('Stop Recording Error', error.message);\n      setIsRecording(false);\n    }\n  };\n\n  const showQualityFeedback = (assessment) => {\n    const { overallScore, recommendations } = assessment;\n    const qualityText = overallScore >= 90 ? 'Excellent!' : \n                       overallScore >= 75 ? 'Good' : \n                       overallScore >= 60 ? 'Acceptable' : 'Needs Improvement';\n\n    Alert.alert(\n      `Take Quality: ${qualityText} (${overallScore}/100)`,\n      recommendations.join('\\n'),\n      [\n        { text: 'Retake', onPress: () => retakeCurrentShot() },\n        { text: 'Continue', onPress: () => moveToNextShot() }\n      ]\n    );\n  };\n\n  const retakeCurrentShot = () => {\n    // Stay on current shot for retake\n    setShowInstructions(true);\n  };\n\n  const moveToNextShot = () => {\n    if (currentShotIndex < storyboard.shots.length - 1) {\n      setCurrentShotIndex(currentShotIndex + 1);\n      setShowInstructions(true);\n    } else {\n      // All shots completed\n      Alert.alert(\n        'Scene Complete!',\n        'Congratulations! You have completed filming all shots.',\n        [\n          { text: 'Review', onPress: () => navigation.navigate('ReviewScreen', { projectId, recordedTakes }) },\n          { text: 'Finish', onPress: () => navigation.navigate('Dashboard') }\n        ]\n      );\n    }\n  };\n\n  // Camera Controls\n  const switchCamera = async () => {\n    const newType = cameraType === Camera.Constants.Type.back \n      ? Camera.Constants.Type.front \n      : Camera.Constants.Type.back;\n    setCameraType(newType);\n  };\n\n  const toggleFlash = () => {\n    const flashModes = [\n      Camera.Constants.FlashMode.off,\n      Camera.Constants.FlashMode.on,\n      Camera.Constants.FlashMode.auto\n    ];\n    const currentIndex = flashModes.indexOf(flashMode);\n    setFlashMode(flashModes[(currentIndex + 1) % flashModes.length]);\n  };\n\n  // Storyboard Display\n  const renderStoryboardOverlay = () => {\n    if (!showStoryboard || !currentShot) return null;\n\n    return (\n      <Modal visible={showStoryboard} transparent animationType=\"slide\">\n        <View style={styles.storyboardModal}>\n          <View style={styles.storyboardContainer}>\n            <Text style={styles.storyboardTitle}>Shot {currentShot.shotNumber}</Text>\n            \n            {currentShot.sketchImageUrl && (\n              <Image \n                source={{ uri: currentShot.sketchImageUrl }} \n                style={styles.storyboardImage}\n                resizeMode=\"contain\"\n              />\n            )}\n            \n            <Text style={styles.storyboardDescription}>{currentShot.description}</Text>\n            \n            <View style={styles.storyboardDetails}>\n              <Text style={styles.detailText}>üì∑ {currentShot.cameraPosition}</Text>\n              <Text style={styles.detailText}>üë• {currentShot.actorPositions}</Text>\n              <Text style={styles.detailText}>‚è±Ô∏è {currentShot.duration}s</Text>\n            </View>\n\n            <TouchableOpacity \n              style={styles.closeStoryboardButton}\n              onPress={() => setShowStoryboard(false)}\n            >\n              <Text style={styles.closeButtonText}>Got it!</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n    );\n  };\n\n  // AI Instructions Overlay\n  const renderInstructionsOverlay = () => {\n    if (!showInstructions || !currentShot) return null;\n\n    const instructions = recordingService.generateAIInstructions(currentShot);\n\n    return (\n      <View style={styles.instructionsOverlay}>\n        <View style={styles.instructionsContainer}>\n          <Text style={styles.instructionsTitle}>üé¨ Shot {currentShot.shotNumber} Instructions</Text>\n          \n          <View style={styles.instructionSection}>\n            <Text style={styles.instructionLabel}>üì∑ Camera Setup:</Text>\n            <Text style={styles.instructionText}>{instructions.cameraSetup}</Text>\n          </View>\n\n          <View style={styles.instructionSection}>\n            <Text style={styles.instructionLabel}>üìç Positioning:</Text>\n            <Text style={styles.instructionText}>{instructions.positioning.camera}</Text>\n            <Text style={styles.instructionText}>{instructions.positioning.actors}</Text>\n          </View>\n\n          <View style={styles.instructionSection}>\n            <Text style={styles.instructionLabel}>üí° Pro Tips:</Text>\n            {instructions.tips.map((tip, index) => (\n              <Text key={index} style={styles.tipText}>‚Ä¢ {tip}</Text>\n            ))}\n          </View>\n\n          <TouchableOpacity \n            style={styles.startRecordingButton}\n            onPress={() => setShowInstructions(false)}\n          >\n            <Text style={styles.startRecordingButtonText}>Ready to Record</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  };\n\n  // Multi-device Status\n  const renderDeviceStatus = () => {\n    if (!multiDeviceEnabled || !deviceStatus) return null;\n\n    return (\n      <View style={styles.deviceStatusContainer}>\n        <Text style={styles.deviceStatusTitle}>\n          üì± {deviceStatus.totalDevices} Device{deviceStatus.totalDevices > 1 ? 's' : ''} Connected\n        </Text>\n        <Text style={styles.deviceRole}>Role: {deviceRole}</Text>\n        <Text style={styles.syncStatus}>Status: {syncStatus}</Text>\n      </View>\n    );\n  };\n\n  if (cameraPermission === null) {\n    return (\n      <View style={styles.permissionContainer}>\n        <ActivityIndicator size=\"large\" color=\"#FFD700\" />\n        <Text style={styles.permissionText}>Requesting camera permission...</Text>\n      </View>\n    );\n  }\n\n  if (cameraPermission !== 'granted') {\n    return (\n      <View style={styles.permissionContainer}>\n        <Text style={styles.permissionText}>Camera permission is required to record scenes.</Text>\n        <TouchableOpacity style={styles.permissionButton} onPress={initializeServices}>\n          <Text style={styles.permissionButtonText}>Grant Permission</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      {/* Camera View */}\n      <View style={styles.cameraContainer}>\n        <Camera\n          ref={cameraRef}\n          style={styles.camera}\n          type={cameraType}\n          flashMode={flashMode}\n          ratio=\"16:9\"\n        >\n          {/* Recording Countdown */}\n          {recordingCountdown > 0 && (\n            <View style={styles.countdownOverlay}>\n              <Text style={styles.countdownText}>{recordingCountdown}</Text>\n            </View>\n          )}\n\n          {/* Recording Indicator */}\n          {isRecording && (\n            <View style={styles.recordingIndicator}>\n              <View style={styles.recordingDot} />\n              <Text style={styles.recordingText}>REC</Text>\n            </View>\n          )}\n\n          {/* Device Status */}\n          {renderDeviceStatus()}\n\n          {/* Shot Info */}\n          <View style={styles.shotInfoContainer}>\n            <Text style={styles.shotInfoText}>\n              Shot {currentShot?.shotNumber} of {storyboard?.shots?.length}\n            </Text>\n            <Text style={styles.shotTypeText}>{currentShot?.shotType?.replace('_', ' ')}</Text>\n          </View>\n        </Camera>\n      </View>\n\n      {/* Controls */}\n      <View style={styles.controlsContainer}>\n        {/* Top Controls */}\n        <View style={styles.topControls}>\n          <TouchableOpacity onPress={() => navigation.goBack()}>\n            <Text style={styles.backButton}>‚Üê Back</Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity onPress={() => setShowStoryboard(true)}>\n            <Text style={styles.storyboardButton}>üìã Storyboard</Text>\n          </TouchableOpacity>\n        </View>\n\n        {/* Camera Controls */}\n        <View style={styles.cameraControls}>\n          <TouchableOpacity style={styles.controlButton} onPress={switchCamera}>\n            <Text style={styles.controlButtonText}>üîÑ</Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity style={styles.controlButton} onPress={toggleFlash}>\n            <Text style={styles.controlButtonText}>\n              {flashMode === Camera.Constants.FlashMode.off ? '‚ö°' : \n               flashMode === Camera.Constants.FlashMode.on ? 'üí°' : 'üîÜ'}\n            </Text>\n          </TouchableOpacity>\n        </View>\n\n        {/* Recording Button */}\n        <View style={styles.recordingControls}>\n          {!isRecording ? (\n            <TouchableOpacity \n              style={[styles.recordButton, loading && styles.disabledButton]}\n              onPress={startRecording}\n              disabled={loading}\n            >\n              {loading ? (\n                <ActivityIndicator color=\"#FFFFFF\" />\n              ) : (\n                <View style={styles.recordButtonInner} />\n              )}\n            </TouchableOpacity>\n          ) : (\n            <TouchableOpacity style={styles.stopButton} onPress={stopRecording}>\n              <View style={styles.stopButtonInner} />\n            </TouchableOpacity>\n          )}\n        </View>\n\n        {/* Shot Navigation */}\n        <View style={styles.shotNavigation}>\n          <TouchableOpacity \n            style={[styles.navButton, currentShotIndex === 0 && styles.disabledNavButton]}\n            onPress={() => setCurrentShotIndex(Math.max(0, currentShotIndex - 1))}\n            disabled={currentShotIndex === 0}\n          >\n            <Text style={styles.navButtonText}>‚Üê Prev Shot</Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity \n            style={[styles.navButton, currentShotIndex === storyboard?.shots?.length - 1 && styles.disabledNavButton]}\n            onPress={() => setCurrentShotIndex(Math.min(storyboard.shots.length - 1, currentShotIndex + 1))}\n            disabled={currentShotIndex === storyboard?.shots?.length - 1}\n          >\n            <Text style={styles.navButtonText}>Next Shot ‚Üí</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {/* Overlays */}\n      {renderStoryboardOverlay()}\n      {renderInstructionsOverlay()}\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000000',\n  },\n  permissionContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#1a1a1a',\n    padding: 20,\n  },\n  permissionText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    textAlign: 'center',\n    marginVertical: 20,\n  },\n  permissionButton: {\n    backgroundColor: '#FFD700',\n    paddingHorizontal: 30,\n    paddingVertical: 15,\n    borderRadius: 25,\n  },\n  permissionButtonText: {\n    color: '#1a1a1a',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  cameraContainer: {\n    flex: 1,\n  },\n  camera: {\n    flex: 1,\n  },\n  countdownOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n  },\n  countdownText: {\n    color: '#FFD700',\n    fontSize: 100,\n    fontWeight: 'bold',\n  },\n  recordingIndicator: {\n    position: 'absolute',\n    top: 50,\n    left: 20,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  recordingDot: {\n    width: 12,\n    height: 12,\n    borderRadius: 6,\n    backgroundColor: '#ff0000',\n    marginRight: 8,\n  },\n  recordingText: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  deviceStatusContainer: {\n    position: 'absolute',\n    top: 50,\n    right: 20,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    padding: 10,\n    borderRadius: 8,\n  },\n  deviceStatusTitle: {\n    color: '#FFD700',\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  deviceRole: {\n    color: '#FFFFFF',\n    fontSize: 10,\n  },\n  syncStatus: {\n    color: '#FFFFFF',\n    fontSize: 10,\n  },\n  shotInfoContainer: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    padding: 10,\n    borderRadius: 8,\n  },\n  shotInfoText: {\n    color: '#FFD700',\n    fontSize: 14,\n    fontWeight: 'bold',\n  },\n  shotTypeText: {\n    color: '#FFFFFF',\n    fontSize: 12,\n    textTransform: 'capitalize',\n  },\n  controlsContainer: {\n    backgroundColor: '#1a1a1a',\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n  },\n  topControls: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  backButton: {\n    color: '#FFD700',\n    fontSize: 16,\n  },\n  storyboardButton: {\n    color: '#FFD700',\n    fontSize: 16,\n  },\n  cameraControls: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 20,\n  },\n  controlButton: {\n    backgroundColor: '#333333',\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  controlButtonText: {\n    fontSize: 24,\n  },\n  recordingControls: {\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  recordButton: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: '#ff0000',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 4,\n    borderColor: '#FFFFFF',\n  },\n  recordButtonInner: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n    backgroundColor: '#ff0000',\n  },\n  stopButton: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: '#666666',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 4,\n    borderColor: '#FFFFFF',\n  },\n  stopButtonInner: {\n    width: 30,\n    height: 30,\n    backgroundColor: '#FFFFFF',\n  },\n  disabledButton: {\n    opacity: 0.5,\n  },\n  shotNavigation: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  navButton: {\n    backgroundColor: '#333333',\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 20,\n  },\n  disabledNavButton: {\n    opacity: 0.3,\n  },\n  navButtonText: {\n    color: '#FFFFFF',\n    fontSize: 14,\n  },\n  storyboardModal: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  storyboardContainer: {\n    backgroundColor: '#2a2a2a',\n    padding: 20,\n    borderRadius: 15,\n    width: '100%',\n    maxWidth: 400,\n  },\n  storyboardTitle: {\n    color: '#FFD700',\n    fontSize: 20,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 15,\n  },\n  storyboardImage: {\n    width: '100%',\n    height: 200,\n    borderRadius: 10,\n    marginBottom: 15,\n  },\n  storyboardDescription: {\n    color: '#FFFFFF',\n    fontSize: 16,\n    marginBottom: 15,\n    lineHeight: 22,\n  },\n  storyboardDetails: {\n    marginBottom: 20,\n  },\n  detailText: {\n    color: '#CCC',\n    fontSize: 14,\n    marginBottom: 5,\n  },\n  closeStoryboardButton: {\n    backgroundColor: '#FFD700',\n    padding: 15,\n    borderRadius: 10,\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    color: '#1a1a1a',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  instructionsOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  instructionsContainer: {\n    backgroundColor: '#2a2a2a',\n    padding: 20,\n    borderRadius: 15,\n    width: '100%',\n    maxWidth: 400,\n  },\n  instructionsTitle: {\n    color: '#FFD700',\n    fontSize: 18,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 20,\n  },\n  instructionSection: {\n    marginBottom: 15,\n  },\n  instructionLabel: {\n    color: '#FFD700',\n    fontSize: 14,\n    fontWeight: 'bold',\n    marginBottom: 5,\n  },\n  instructionText: {\n    color: '#FFFFFF',\n    fontSize: 13,\n    lineHeight: 18,\n    marginBottom: 3,\n  },\n  tipText: {\n    color: '#CCC',\n    fontSize: 12,\n    lineHeight: 16,\n    marginBottom: 2,\n  },\n  startRecordingButton: {\n    backgroundColor: '#FFD700',\n    padding: 15,\n    borderRadius: 10,\n    alignItems: 'center',\n    marginTop: 10,\n  },\n  startRecordingButtonText: {\n    color: '#1a1a1a',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n\nexport default FilmingScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}